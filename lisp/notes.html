<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content= "text/html; charset=utf-8" />

  <title>common lisp 学习笔记</title>
  <meta name="author" content="Xu Jingtao" />
  <meta name="generator" content="Muse" />
  <META NAME="keywords" CONTENT="jingtao,elisp,lisp,common lisp,emacs,org-mode,muse,mew,assembly,masm32,masm,win32,nasm" />
  <link rel="shortcut icon" href="/images/web/favicon.ico" />
  <link rel="icon" type="image/gif" href="/images/web/animated_favicon1.gif" />
  
<style type="text/css" media="all">
/*<![CDATA[*/
      @import url("../css/core.css");
      
/*]]>*/
</style>
  <link rel="made" href="mailto:jingtaozf@gmail.com" />
    <script type="text/javascript">//<![CDATA[
this.onload = function () {
(new Image()).src = "http://cb.amazingcounters.com/counter.php?i=2623438&c=7870627";
}

//]]></script>
</head>
<body>
  <div id="banner">
    <p><span id="title">common lisp 学习笔记</span></p>
  </div>
    <!-- Page published by Emacs Muse begins here -->
<div class="contents">
<dl>
<dt>
<a href="#sec1">SBCL读取GBK编码的文件</a>
</dt>
<dt>
<a href="#sec2">在Windows下生成exe文件 (sbcl)</a>
</dt>
</dl>
</div>


<h2><a name="sec1" id="sec1"></a>
SBCL读取GBK编码的文件</h2>

<pre class="src">
(<span class="keyword">with-open-file</span> (s <span class="string">"sample.txt"</span> <span class="builtin">:direction</span> input <span class="builtin">:external-format</span> <span class="builtin">:gbk</span>)
  (read-line s nil nil nil))
</pre>


<h2><a name="sec2" id="sec2"></a>
在Windows下生成exe文件 (sbcl)</h2>

<p class="first">首先在sbcl环境中使用save-lisp-and-die函数</p>

<pre class="src">
(<span class="keyword">defun</span> <span class="function-name">hello</span> ()
 (format t <span class="string">"hello world~%"</span>))
(sb-ext:save-lisp-and-die <span class="string">"hello.exe"</span>  <span class="builtin">:toplevel</span> #'hello <span class="builtin">:executable</span> t)
</pre>
在命令行中执行hello.exe会显示：

<pre class="example">
This is experimental prerelease support for the Windows platform: use
at your own risk.  &quot;Your Kitten of Death awaits!&quot;
Hello world!
</pre>
这里的警告信息可以通过修改源代码的形式去掉，如果需要的话。


<!-- -*- encoding: utf-8 -*- -->
<p>&nbsp;</p>
    <div id="footer">
          <div id="footlink">
            [<a href="../index.html">返回首页</a> ]</div>
            <div id="footdate">
            2014 年 02 月 28 日更新
            </div>
    </div>
</body>
</html>
